----------- Original Message ------------
 Subject: Re: FTL
 Date: Fri, 14 Oct 2011 14:46:09 +0900
 From: ACCC High Performance Computing group <hpc@riken.jp>
 To: amano@rtc.riken.jp
 Cc:

 天野様 (アカウント名: amano)

 情報基盤センターSE xxxです。

 > マニュアル ver 1.2 の
 > 6.6.12.6 ランクリスト の
 > 表6-12
 > を見ると、項番に1-7の指定が書いてありますが、
 > この番号は、ランクの1-7を示すのではなく、特別な
 > 意味を持っているようです。
 > したがって、
 > #BEFORE: 1:
 > などと記載した場合、ランク1と言う意味でなく、
 > 特別な意味として解釈されると思ったのですが、
 > 結局、よくわからないままです。

 "項番1"から"項番7" は、ランクリストの記述方法を説明した
 項目の番号でして、全く意味はありません。

 ご認識いただいている通り、ランクリストはBEFORE,AFTER構文の直後に記載いたします。

 #BEFORE：[ランクリスト [@転送先ディレクトリ名] : ] fileA[,fileB...]
          ^^^^^^^^^^^^^^
 このランクリストは、数字だけでなく、複数のランク番号を同時に指定する
 ことや、
 '*'や'ALL'、'MASTER' といった文字列の指定も可能です。

 表6-12では、上記の説明を7通り行っています。

 (項番1) #BEFORE: 1:   fileA      !! ランク1にfileAを転送する
 (項番2) #BEFORE: 1-3: fileB      !! ランク1,2,3にfileBを転送する
 (項番3) #BEFORE: 1,3: fileC      !! ランク1,3にfileCを転送する
 (項番4) #BEFORE: 1-3,6,8: fileD  !! ランク1,2,3,6,8にfileDを転送する
 (項番5) #BEFORE: *: fileE        !! 全ランクにfileEを転送する
 (項番6) #BEFORE: ALL: fileF      !! 全ランクにfileFを転送する
 (項番7) #BEFORE: MASTER: fileG   !!
マスターノード(ランク0)にファイルGを転送する

 なお、RICC利用手引書は定期的に更新されており、現在1.12版を公開しています。
 FTL構文に関しては、特筆するような変更点はございませんが、
 最新版のご参照も併せてお願いいたします。
https://ricc.riken.jp/cgi-bin/hpcportal.2.2/index.cgi?LMENU=DOCUMENTS
 =>「RICC User's Guide」

 以上、よろしくお願いいたします。

 >
 > xxxさま
 >
 > 天野です。
 > 返信ありがとうございます。
 >
 >
 > > 天野様 (アカウント名: amano)
 > >
 > > 情報基盤センターSE xxxです。
 > >
 > > 指定したランク番号に特定ファイルを転送する方法について、
 > > 記載いただいている以下のBEFORE構文は、該当ファイルは指定したランクが
 > > 動作するノードに対して、正しく転送されます。
 > >
 > > > #BEFORE: 0:mpi_solve-centroid-multifile,f.0
 > > > #BEFORE: 1:mpi_solve-centroid-multifile,f.1
 > > > #BEFORE: 2:mpi_solve-centroid-multifile,f.2
 > > > #BEFORE: 3:mpi_solve-centroid-multifile,f.3
 > >
 > > また、上記のようなランク毎に特定ファイルを指定する方法としては、
 > > ランク番号ごとに付与される環境変数 $MPI_RANK を用いて、
 > >
 > > #BEFORE: mpi_solve-centroid-multifile,f.$MPI_RANK
 > >
 > > と指定することでも転送が可能です。
 > > この内容はRICC利用手引書 6.6.12.5 FTL変数 に記載があります。
 > >
 > > 天野様がご認識されている通り、通常は1ノードあたり8ランクが
 > > 稼動しますので、f.1,f.2,f.3,f.4は、同じノードに転送されていますが
 > > 別のノードであっても正しく転送されます。
 >
 > ここまでは、了解しました。
 >
 > >
 > > 最後に、今回のご質問は利用手引書をご覧になってのご質問とのことですが、
 > > 分かりにくい記述となっており、誠に申し訳ございません。
 > > 今後の改善項目としてさせていただきますので、
 > > どの部分をご覧になられたかお教えいただけませんでしょうか。
 >
 > マニュアル ver 1.2 の
 > 6.6.12.6 ランクリスト の
 > 表6-12
 > を見ると、項番に1-7の指定が書いてありますが、
 > この番号は、ランクの1-7を示すのではなく、特別な
 > 意味を持っているようです。
 > したがって、
 > #BEFORE: 1:
 > などと記載した場合、ランク1と言う意味でなく、
 > 特別な意味として解釈されると思ったのですが、
 > 結局、よくわからないままです。
 >
 > ご説明いただけると幸いです。
 >
 > よろしくお願いいたします。
 >
 > >
 > > 以上、よろしくお願いいたします。
 > >
 > > > BRC天野です。
 > > >
 > > > FTLの使用法に付いてお伺いします。
 > > >
 > > > まず、下のコードを見てください。
 > > >
 > > > #BEFORE: 0:mpi_solve-centroid-multifile,f.0
 > > > #BEFORE: 1:mpi_solve-centroid-multifile,f.1
 > > > #BEFORE: 2:mpi_solve-centroid-multifile,f.2
 > > > #BEFORE: 3:mpi_solve-centroid-multifile,f.3
 > > >
 > > > このコードは、私は以下のような挙動を期待して書きました。
 > > >
 > > > ランク0のプロセスが動くノードにf.0を転送
 > > > ランク1のプロセスが動くノードにf.1を転送
 > > > ランク2のプロセスが動くノードにf.2を転送
 > > > ランク3のプロセスが動くノードにf.3を転送
 > > >
 > > > しかしマニュアルを良く読むとどうも違うようです。
 > > > #すべて同じノードに転送されるでしょうから、
 > > > #結果的にはうまくいってます。
 > > > 特定のランクが動くそのノードに、
 > > > 特定のファイルを転送するには、
 > > > どのように記述すればよいのでしょうか。
 > > >
 > > > よろしくお願いいたします。
 > > >
 > > >
 > > > /**********************************
 > > >  独立行政法人理化学研究所筑波研究所
 > > >  バイオリソースセンター 情報解析技術室
 > > >  天野　晃 (AMANO, Kou)
 > > >  〒305-0074 茨城県つくば市高野台3-1-1
 > > >  Tel(研究室代表): 029-836-9115
 > > >  内線: 8304
 > > >  e-mail: amano@brc.riken.jp
 > > >  URL:http://www.brc.riken.jp/
 > > >  BRC内部より当室への連絡は、
 > > >  xxxxxx 宛にお願い致します。
 > > > **********************************/
 > > >
 > >
 > >
 > > --
 > > Advanced Center for Computing and Communication
 > > RIKEN (The Institute of Physical and Chemical Research)
 > >
 > > 2011/10/14
 > >
 >
 > /**********************************
 >  独立行政法人理化学研究所筑波研究所
 >  バイオリソースセンター 情報解析技術室
 >  天野　晃 (AMANO, Kou)
 >  〒305-0074 茨城県つくば市高野台3-1-1
 >  Tel(研究室代表): 029-836-9115
 >  内線: 8304
 >  e-mail: amano@brc.riken.jp
 >  URL:http://www.brc.riken.jp/
 >  BRC内部より当室への連絡は、
 >  xxxxxxx 宛にお願い致します。
 > **********************************/
 >


 --
 Advanced Center for Computing and Communication
 RIKEN (The Institute of Physical and Chemical Research)

 2011/10/14

 -------- End of Original Message --------


